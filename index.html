<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>PDF OCR Tool | Advocate / CSC</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Tesseract -->
<script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>
<!-- PDF.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>

<style>
body{font-family:Arial;background:#f4f6f8;margin:0;padding:0}
.container{max-width:600px;margin:20px auto;background:#fff;padding:20px;border-radius:8px;box-shadow:0 0 10px rgba(0,0,0,.1)}
h2{text-align:center;color:#1a237e}
input,select,button{width:100%;padding:10px;margin:8px 0;font-size:16px}
button{background:#1a237e;color:#fff;border:none;border-radius:5px}
#loading{display:none;text-align:center;font-weight:bold}
textarea{width:100%;height:200px}
.brand{text-align:center;font-size:14px;color:#555;margin-top:10px}
</style>
</head>

<body>
<div class="container">
<h2>PDF to OCR Tool</h2>

<input type="file" id="pdfFile" accept="application/pdf">

<select id="lang">
<option value="eng">English</option>
<option value="hin">Hindi</option>
<option value="mar">Marathi</option>
</select>

<button onclick="startOCR()">Start OCR</button>

<div id="loading">⏳ OCR Processing… Please wait</div>

<textarea id="result" placeholder="Extracted text will appear here..."></textarea>

<button onclick="downloadText()">Download Text</button>

<div class="brand">
Powered by Krishna Londhe | Advocate / CSC Tool
</div>
</div>

<script>
pdfjsLib.GlobalWorkerOptions.workerSrc =
'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';

async function startOCR(){
const file=document.getElementById('pdfFile').files[0];
if(!file){alert("Please upload PDF");return;}
document.getElementById('loading').style.display="block";
const lang=document.getElementById('lang').value;
const reader=new FileReader();
reader.readAsArrayBuffer(file);
reader.onload=async function(){
const pdf=await pdfjsLib.getDocument({data:reader.result}).promise;
let fullText="";
for(let i=1;i<=pdf.numPages;i++){
const page=await pdf.getPage(i);
const viewport=page.getViewport({scale:2});
const canvas=document.createElement("canvas");
const ctx=canvas.getContext("2d");
canvas.height=viewport.height;
canvas.width=viewport.width;
await page.render({canvasContext:ctx,viewport}).promise;
const { data:{ text }}=await Tesseract.recognize(canvas,lang);
fullText+=text+"\n\n";
}
document.getElementById('result').value=fullText;
document.getElementById('loading').style.display="none";
}
}

function downloadText(){
const text=document.getElementById('result').value;
const blob=new Blob([text],{type:"text/plain"});
const a=document.createElement("a");
a.href=URL.createObjectURL(blob);
a.download="ocr-text.txt";
a.click();
}
</script>
</body>
</html>
